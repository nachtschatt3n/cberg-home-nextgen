---
apiVersion: v1
kind: ConfigMap
metadata:
  name: elasticsearch-logs-ilm
  namespace: monitoring
data:
  ilm-policy.json: |
    {
      "policy": {
        "phases": {
          "hot": {
            "actions": {}
          },
          "delete": {
            "min_age": "7d",
            "actions": {
              "delete": {}
            }
          }
        }
      }
    }
  index-template.json: |
    {
      "index_patterns": ["fluent-bit-*"],
      "template": {
        "settings": {
          "index.lifecycle.name": "fluent-bit-logs",
          "index.number_of_shards": 1,
          "index.number_of_replicas": 0
        }
      },
      "priority": 200
    }
